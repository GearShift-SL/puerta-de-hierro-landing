---

---

<section id="contacto" class="py-20 md:py-28 bg-stone-900 text-white">
  <div class="max-w-7xl mx-auto px-4 sm:px-6">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-20">
      <!-- Info Column -->
      <div class="scroll-animate">
        <p class="text-primary font-medium tracking-[0.15em] uppercase text-sm mb-4">Contacto</p>
        <h2 class="font-serif text-3xl md:text-4xl lg:text-5xl text-white leading-tight mb-6">
          ¿Le gustaría conocer más detalles?
        </h2>
        <p class="text-white/70 text-lg leading-relaxed mb-10">
          Solicite información sin compromiso. Nuestro equipo comercial estará encantado de atenderle y resolver cualquier duda sobre la promoción.
        </p>

        <!-- Contact Details -->
        <div class="space-y-6">
          <div class="flex items-start gap-4">
            <svg class="w-5 h-5 text-primary mt-1 shrink-0" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
              <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z" />
            </svg>
            <div>
              <p class="font-medium text-white text-sm">Dirección</p>
              <a href="https://maps.app.goo.gl/wXeAWh2rh2ssrLxg9" target="_blank" rel="noopener noreferrer" class="text-white/60 text-sm hover:text-primary transition-colors">
                Calle Santibáñez de Béjar, 6, 28042, Madrid
              </a>
            </div>
          </div>
          <div class="flex items-start gap-4">
            <svg class="w-5 h-5 text-primary mt-1 shrink-0" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75" />
            </svg>
            <div>
              <p class="font-medium text-white text-sm">Email</p>
              <a href="mailto:info@clement.es" class="text-white/60 text-sm hover:text-primary transition-colors">
                info@clement.es
              </a>
            </div>
          </div>
        </div>
      </div>

      <!-- Form Column -->
      <div class="scroll-animate relative" data-delay="200">
        <form id="contact-form" class="bg-white/5 backdrop-blur-sm rounded-2xl p-6 md:p-8 border border-white/10 space-y-5 transition-all duration-500 ease-out">
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-5">
            <div>
              <label for="name" class="block text-white/70 text-sm mb-1.5">Nombre</label>
              <input
                type="text"
                id="name"
                name="name"
                class="w-full bg-white/10 border border-white/10 rounded-lg px-4 py-3 text-white placeholder-white/30 text-sm focus:outline-none focus:border-primary transition-colors"
                placeholder="Su nombre"
              />
            </div>
            <div>
              <label for="surname" class="block text-white/70 text-sm mb-1.5">Apellidos</label>
              <input
                type="text"
                id="surname"
                name="surname"
                class="w-full bg-white/10 border border-white/10 rounded-lg px-4 py-3 text-white placeholder-white/30 text-sm focus:outline-none focus:border-primary transition-colors"
                placeholder="Sus apellidos"
              />
            </div>
          </div>
          <div>
            <label for="email" class="block text-white/70 text-sm mb-1.5">Email</label>
            <input
              type="email"
              id="email"
              name="email"
              class="w-full bg-white/10 border border-white/10 rounded-lg px-4 py-3 text-white placeholder-white/30 text-sm focus:outline-none focus:border-primary transition-colors"
              placeholder="su@email.com"
            />
          </div>
          <div>
            <label for="phone" class="block text-white/70 text-sm mb-1.5">Teléfono</label>
            <input
              type="tel"
              id="phone"
              name="phone"
              class="w-full bg-white/10 border border-white/10 rounded-lg px-4 py-3 text-white placeholder-white/30 text-sm focus:outline-none focus:border-primary transition-colors"
              placeholder="+34 600 000 000"
            />
          </div>
          <div>
            <label for="message" class="block text-white/70 text-sm mb-1.5">Mensaje</label>
            <textarea
              id="message"
              name="message"
              rows="4"
              class="w-full bg-white/10 border border-white/10 rounded-lg px-4 py-3 text-white placeholder-white/30 text-sm focus:outline-none focus:border-primary transition-colors resize-none"
              placeholder="¿En qué podemos ayudarle?"
            ></textarea>
          </div>
          <div>
            <label class="flex items-start gap-2 cursor-pointer">
              <input type="checkbox" name="privacy" class="mt-1 accent-primary" />
              <span class="text-white/50 text-xs leading-relaxed">
                He leído y acepto la <a href="/privacy/" class="text-primary hover:underline">política de privacidad</a>.
              </span>
            </label>
          </div>
          <button
            type="submit"
            id="contact-submit"
            class="cta-gradient w-full text-center !py-3.5 font-medium"
          >
            Solicitar información
          </button>
          <p id="contact-feedback" class="text-sm text-center hidden"></p>
        </form>

        <!-- Success Message (hidden by default) -->
        <div id="contact-success" class="hidden bg-white/5 backdrop-blur-sm rounded-2xl p-6 md:p-8 border border-white/10 flex flex-col items-center justify-center text-center min-h-[400px] opacity-0 scale-95">
          <div class="relative w-20 h-20 flex items-center justify-center mb-6">
            <div class="pulse-ring absolute inset-0 rounded-full bg-primary/20"></div>
            <div class="w-20 h-20 rounded-full bg-primary/20 flex items-center justify-center relative">
              <svg class="w-10 h-10 text-primary" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
              </svg>
            </div>
          </div>
          <h3 class="font-serif text-2xl md:text-3xl text-white mb-4">¡Mensaje enviado!</h3>
          <p class="text-white/70 text-base leading-relaxed max-w-sm">
            Gracias por su interés. Nuestro equipo comercial se pondrá en contacto con usted a la mayor brevedad.
          </p>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  @keyframes successFadeIn {
    0% {
      opacity: 0;
      transform: scale(0.9) translateY(12px);
    }
    100% {
      opacity: 1;
      transform: scale(1) translateY(0);
    }
  }

  @keyframes checkmarkDraw {
    0% {
      stroke-dashoffset: 48;
    }
    100% {
      stroke-dashoffset: 0;
    }
  }

  @keyframes pulseRing {
    0% {
      transform: scale(0.8);
      opacity: 0;
    }
    50% {
      opacity: 1;
    }
    100% {
      transform: scale(1.4);
      opacity: 0;
    }
  }

  #contact-success.show {
    animation: successFadeIn 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  }

  #contact-success.show svg path {
    stroke-dasharray: 48;
    stroke-dashoffset: 48;
    animation: checkmarkDraw 0.6s cubic-bezier(0.65, 0, 0.35, 1) 0.3s forwards;
  }

  #contact-success.show .pulse-ring {
    animation: pulseRing 1.2s cubic-bezier(0.16, 1, 0.3, 1) 0.2s;
  }
</style>

<script>
  const form = document.getElementById("contact-form") as HTMLFormElement;
  const submitBtn = document.getElementById("contact-submit") as HTMLButtonElement;
  const feedback = document.getElementById("contact-feedback") as HTMLParagraphElement;
  const successPanel = document.getElementById("contact-success") as HTMLDivElement;

  form.addEventListener("submit", async (e) => {
    e.preventDefault();

    const formData = new FormData(form);

    // Validate privacy checkbox
    if (!formData.get("privacy")) {
      feedback.textContent = "Debe aceptar la política de privacidad.";
      feedback.className = "text-sm text-center text-red-400";
      return;
    }

    // Disable button and show loading state
    submitBtn.disabled = true;
    const originalText = submitBtn.textContent;
    submitBtn.textContent = "Enviando...";
    feedback.className = "text-sm text-center hidden";

    const payload = {
      audience: {
        name: "puerta_de_hierro",
        audience_type: "contact_form",
      },
      email: formData.get("email"),
      first_name: formData.get("name"),
      last_name: formData.get("surname"),
      phone: formData.get("phone"),
      message: formData.get("message"),
      source: 1,
    };

    try {
      const response = await fetch(
        "https://formrelay.hlab.es/api/subscribers/",
        {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload),
        }
      );

      if (!response.ok) throw new Error("Error en el envío");

      // Animate form out
      form.style.opacity = "0";
      form.style.transform = "scale(0.95) translateY(-10px)";

      setTimeout(() => {
        form.style.display = "none";

        // Show and animate success panel in
        successPanel.classList.remove("hidden");
        successPanel.style.display = "flex";
        // Force reflow so the animation triggers
        void successPanel.offsetWidth;
        successPanel.classList.add("show");
      }, 500);
    } catch {
      feedback.textContent = "Ha ocurrido un error. Por favor, inténtelo de nuevo más tarde.";
      feedback.className = "text-sm text-center text-red-400";
      submitBtn.disabled = false;
      submitBtn.textContent = originalText;
    }
  });
</script>
