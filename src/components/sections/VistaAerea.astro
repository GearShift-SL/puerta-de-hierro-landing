---
import { Image } from 'astro:assets';
import vistaAerea from '~/assets/images/vista-aerea.jpg';

const houses = [
  { label: 'F24A', type: 'F24', address: 'Fuentelarreyna 24A', area: '364 m²', plot: '609 m²', status: 'Disponible' },
  { label: 'F24B', type: 'F24', address: 'Fuentelarreyna 24B', area: '366 m²', plot: '558 m²', status: 'Vendido' },
  { label: 'F24C', type: 'F24', address: 'Fuentelarreyna 24C', area: '409 m²', plot: '535 m²', status: 'Disponible' },
  { label: 'F24D', type: 'F24', address: 'Fuentelarreyna 24D', area: '480 m²', plot: '586 m²', status: 'Disponible' },
  { label: 'N21', type: 'N', address: 'Navalmanzano 21', area: '429 m²', plot: '510 m²', status: 'Vendido' },
  { label: 'N19', type: 'N', address: 'Navalmanzano 19', area: '400 m²', plot: '519 m²', status: 'Disponible' },
];

const highlights = [
  {
    icon: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M3 21h18"/><path d="M5 21V7l8-4v18"/><path d="M19 21V11l-6-4"/><path d="M9 9v.01"/><path d="M9 12v.01"/><path d="M9 15v.01"/><path d="M9 18v.01"/></svg>`,
    title: '6 chalets Gran Lujo',
    description: 'Pareados dos a dos, de la línea GOLD HOME',
  },
  {
    icon: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M3 7h6l3 -3l3 3h6"/><path d="M6 7v11a1 1 0 0 0 1 1h10a1 1 0 0 0 1 -1v-11"/><path d="M12 7v4"/><path d="M10 11h4"/></svg>`,
    title: '2 tipologías',
    description: 'F24 (2 plantas + sótano) y N (3 plantas + sótano)',
  },
  {
    icon: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M3 9h18"/><path d="M9 21V9"/></svg>`,
    title: '400–480 m² construidos',
    description: 'En parcelas de 510 a 609 m²',
  },
  {
    icon: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M2 20a2.4 2.4 0 0 0 2 1a2.4 2.4 0 0 0 2 -1a2.4 2.4 0 0 1 2 -1a2.4 2.4 0 0 1 2 1a2.4 2.4 0 0 0 2 1a2.4 2.4 0 0 0 2 -1a2.4 2.4 0 0 1 2 -1a2.4 2.4 0 0 1 2 1a2.4 2.4 0 0 0 2 1a2.4 2.4 0 0 0 2 -1"/><path d="M2 16a2.4 2.4 0 0 0 2 1a2.4 2.4 0 0 0 2 -1a2.4 2.4 0 0 1 2 -1a2.4 2.4 0 0 1 2 1a2.4 2.4 0 0 0 2 1a2.4 2.4 0 0 0 2 -1a2.4 2.4 0 0 1 2 -1a2.4 2.4 0 0 1 2 1a2.4 2.4 0 0 0 2 1a2.4 2.4 0 0 0 2 -1"/><path d="M12 12v-4h-2l2 -4l2 4h-2"/></svg>`,
    title: 'Piscina privada',
    description: 'Cada vivienda con piscina de 8×3,5 m',
  },
];
---

<section id="vista-aerea" class="py-20 md:py-28 bg-stone-50">
  <div class="max-w-7xl mx-auto px-4 sm:px-6">
    <!-- Header -->
    <div class="text-center mb-14 scroll-animate">
      <p class="text-primary font-medium tracking-[0.15em] uppercase text-sm mb-4">La promoción</p>
      <h2 class="font-serif text-3xl md:text-4xl lg:text-5xl text-default leading-tight mb-4">
        Vista aérea del conjunto
      </h2>
      <p class="text-muted text-lg max-w-2xl mx-auto">
        Un exclusivo conjunto residencial de 6 chalets Gran Lujo en la prestigiosa Urbanización Puerta de Hierro, con dos tipologías diseñadas para un estilo de vida sin igual.
      </p>
    </div>

    <!-- Aerial Image -->
    <div class="scroll-animate mb-16" data-delay="100">
      <div class="relative rounded-2xl overflow-hidden shadow-2xl group">
        <Image
          src={vistaAerea}
          alt="Vista aérea de las 6 viviendas de CLEMENT Puerta de Hierro con planos superpuestos sobre mapa satélite"
          class="w-full object-cover"
          widths={[640, 1024, 1600, 2400]}
          sizes="(max-width: 1280px) 100vw, 1280px"
          loading="lazy"
        />
        <!-- Subtle overlay gradient at bottom for legibility -->
        <div class="absolute inset-x-0 bottom-0 h-1/3 bg-linear-to-t from-black/40 to-transparent pointer-events-none"></div>
        <!-- Caption -->
        <div class="absolute bottom-0 left-0 right-0 p-5 md:p-12 flex flex-wrap items-end justify-between gap-4">
          <div>
            <p class="text-white/70 text-xs uppercase tracking-wider mb-1">Urbanización Puerta de Hierro, Madrid</p>
            <p class="text-white font-serif text-lg md:text-xl">6 viviendas · 2 tipologías · parcelas desde 510 m²</p>
          </div>
          <div class="flex items-center gap-2 bg-white/15 backdrop-blur-sm border border-white/20 rounded-full px-4 py-2">
            <span class="relative flex h-2 w-2">
              <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
              <span class="relative inline-flex rounded-full h-2 w-2 bg-green-400"></span>
            </span>
            <span class="text-white text-xs font-medium tracking-wide">4 disponibles</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Highlights Grid -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-16">
      {highlights.map((item, i) => (
        <div class="scroll-animate bg-white rounded-2xl p-6 shadow-sm hover:shadow-md transition-shadow" data-delay={i * 100}>
          <div class="text-primary mb-4" set:html={item.icon} />
          <h3 class="font-semibold text-default mb-1">{item.title}</h3>
          <p class="text-muted text-sm leading-relaxed">{item.description}</p>
        </div>
      ))}
    </div>

    <!-- Houses Table (hidden on mobile) -->
    <div class="hidden md:block scroll-animate" data-delay="200">
      <h3 class="font-serif text-2xl md:text-3xl text-default mb-6 text-center">Resumen de viviendas</h3>

      <!-- Desktop table -->
      <div class="hidden md:block overflow-hidden rounded-2xl border border-stone-200 bg-white shadow-sm">
        <table class="w-full text-left">
          <thead>
            <tr class="bg-stone-50 border-b border-stone-200">
              <th class="px-6 py-4 text-xs font-semibold text-muted uppercase tracking-wider">Vivienda</th>
              <th class="px-6 py-4 text-xs font-semibold text-muted uppercase tracking-wider">Tipología</th>
              <th class="px-6 py-4 text-xs font-semibold text-muted uppercase tracking-wider">Dirección</th>
              <th class="px-6 py-4 text-xs font-semibold text-muted uppercase tracking-wider">Sup. construida</th>
              <th class="px-6 py-4 text-xs font-semibold text-muted uppercase tracking-wider">Parcela</th>
              <th class="px-6 py-4 text-xs font-semibold text-muted uppercase tracking-wider">Estado</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-stone-100">
            {houses.map((house) => (
              <tr class="hover:bg-stone-50/50 transition-colors">
                <td class="px-6 py-4 font-semibold text-default">{house.label}</td>
                <td class="px-6 py-4 text-muted">
                  <span class:list={[
                    'inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium',
                    house.type === 'F24' ? 'bg-blue-50 text-blue-700' : 'bg-amber-50 text-amber-700',
                  ]}>
                    {house.type === 'F24' ? '2 plantas + sótano' : '3 plantas + sótano'}
                  </span>
                </td>
                <td class="px-6 py-4 text-muted text-sm">{house.address}</td>
                <td class="px-6 py-4 text-default font-medium">{house.area}</td>
                <td class="px-6 py-4 text-muted">{house.plot}</td>
                <td class="px-6 py-4">
                  {house.status === 'Vendido' ? (
                    <span class="inline-flex items-center gap-1.5 text-xs font-medium text-stone-400">
                      <span class="w-1.5 h-1.5 rounded-full bg-stone-300"></span>
                      Vendido
                    </span>
                  ) : (
                    <span class="inline-flex items-center gap-1.5 text-xs font-medium text-emerald-600">
                      <span class="w-1.5 h-1.5 rounded-full bg-emerald-500"></span>
                      Disponible
                    </span>
                  )}
                </td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>

      <!-- Mobile cards -->
      <div class="md:hidden grid grid-cols-1 sm:grid-cols-2 gap-4">
        {houses.map((house) => (
          <div class="bg-white rounded-xl p-5 shadow-sm border border-stone-100">
            <div class="flex items-center justify-between mb-3">
              <span class="font-semibold text-default text-lg">{house.label}</span>
              {house.status === 'Vendido' ? (
                <span class="inline-flex items-center gap-1.5 text-xs font-medium text-stone-400 bg-stone-100 px-2.5 py-1 rounded-full">
                  <span class="w-1.5 h-1.5 rounded-full bg-stone-300"></span>
                  Vendido
                </span>
              ) : (
                <span class="inline-flex items-center gap-1.5 text-xs font-medium text-emerald-600 bg-emerald-50 px-2.5 py-1 rounded-full">
                  <span class="w-1.5 h-1.5 rounded-full bg-emerald-500"></span>
                  Disponible
                </span>
              )}
            </div>
            <p class="text-muted text-sm mb-2">{house.address}</p>
            <span class:list={[
              'inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium mb-3',
              house.type === 'F24' ? 'bg-blue-50 text-blue-700' : 'bg-amber-50 text-amber-700',
            ]}>
              {house.type === 'F24' ? '2 plantas + sótano' : '3 plantas + sótano'}
            </span>
            <div class="flex gap-4 pt-3 border-t border-stone-100">
              <div>
                <p class="text-xs text-muted">Construidos</p>
                <p class="font-medium text-default text-sm">{house.area}</p>
              </div>
              <div>
                <p class="text-xs text-muted">Parcela</p>
                <p class="font-medium text-default text-sm">{house.plot}</p>
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>

    <!-- CTA -->
    <div class="text-center mt-12 scroll-animate" data-delay="100">
      <a
        href="#viviendas"
        class="cta-gradient inline-flex items-center gap-2"
      >
        Ver tipologías y planos
        <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 13.5 12 21m0 0-7.5-7.5M12 21V3" />
        </svg>
      </a>
    </div>
  </div>
</section>

